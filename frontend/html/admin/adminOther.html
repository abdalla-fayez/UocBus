<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Other Settings</title>
  <link rel="icon" href="../assets/favicon.png" type="image/png" />
  <!-- Link to your custom admin CSS -->
  <link rel="stylesheet" href="../../css/admin.css" />
  <!-- Include Bootstrap CSS for styling -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../css/responsive.css" />
  <style>
      @media screen and (max-width: 768px) {
          .card {
              margin: 10px 0;
          }
          .form-control {
              width: 100% !important;
          }
      }
  </style>
</head>
<body>
  <header class="mb-4">
    <div class="d-flex justify-content-between align-items-center" style="padding-bottom: 1rem;">
      <h1>Other Settings</h1>
      <h1>U of Canada Bus Ticketing System Admin</h1>
      <a>
        <img src="../../assets/UOC-Website-Header-Logo3.png" alt="University Logo" style="height: 70px;">
      </a>
    </div>    <nav class="d-flex justify-content-between align-items-center">
      <ul class="nav">
        <li class="nav-item"><a class="nav-link" href="adminDashboard.html">Dashboard</a></li>
        <li class="nav-item" data-requires-permission="manage_buses"><a class="nav-link" href="adminBuses.html">Manage Buses</a></li>
        <li class="nav-item" data-requires-permission="manage_routes"><a class="nav-link" href="adminRoutes.html">Manage Routes</a></li>
        <li class="nav-item" data-requires-permission="manage_pickup_points"><a class="nav-link" href="adminPickupPoints.html">Manage Pickup Points</a></li>
        <li class="nav-item" data-requires-permission="manage_automation"><a class="nav-link active" href="adminOther.html">Other</a></li>
      </ul>
      <div>
        <span class="mr-3">Role: <span class="role-indicator badge badge-info">Loading...</span></span>
        <button id="logoutBtn" class="btn btn-dark">Logout</button>
      </div>
    </nav>
  </header>
  
  <main class="container">
    <section id="toggleTripAutomationSection" class="mb-5" data-requires-permission="manage_automation">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Daily Trip Generation</h5>
          <p class="card-text" id="tripAutomationStatus">Loading current status...</p>
          <button id="toggleTripAutomationBtn" class="btn btn-primary" data-requires-permission-action="manage_automation">Toggle Trip Automation</button>
        </div>
      </div>
    </section>

    <section id="manualTripGenerationSection" class="mb-5" data-requires-permission="manage_automation">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Manual Trip Generation</h5>
          <p class="card-text">Clicking the button below will attempt to manually create trips as the automatic generation does.</p>
          <button id="generateTripsBtn" class="btn btn-primary" data-requires-permission-action="manage_automation">Generate Trips Now</button>
          <div id="tripGenerationStatus" class="mt-2"></div>
        </div>
      </div>
    </section>

    <section id="ticketAllowanceSection" class="mb-5" data-requires-permission="manage_system_config">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Maximum Ticket Allowance</h5>
          <p class="card-text">Set the maximum number of tickets that students can book per semester.</p>
          <div class="form-group">
            <div class="input-group">
              <input type="number" id="ticketAllowanceInput" class="form-control" min="1" style="max-width: 200px;">
              <div class="input-group-append">
                <button id="updateTicketAllowanceBtn" class="btn btn-primary" data-requires-permission-action="manage_system_config">Update</button>
              </div>
            </div>
            <small class="form-text text-muted mt-2">Current value: <span id="currentTicketAllowance">Loading...</span></small>
          </div>
          <div id="ticketAllowanceStatus" class="mt-2"></div>
          
          <hr class="my-4">
          
          <h6>Reset Student Bookings Counter</h6>
          <p class="card-text">This resets the bookings counter for all students. Intended to be used at the start of a new semester.</p>
          <button id="resetBookingCountersBtn" class="btn btn-warning" data-requires-permission-action="manage_system_config">Reset All Counters</button>
          <div id="resetCounterStatus" class="mt-2"></div>
        </div>
      </div>
    </section>

    <!-- <section id="downloadReportSection" class="mb-5" data-requires-permission="generate_reports">
      <div class="card mt-4">
        <div class="card-body">
          <h5 class="card-title">Bookings Report (Daily)</h5>
          <p class="card-text">Select a date and download the report in CSV format.</p>
          <div class="form-group">
            <label for="reportDate">Bookings Date:</label>
            <input type="date" id="reportDate" class="form-control col-2" required>
          </div>
          <button id="downloadReportBtn" class="btn btn-primary mt-2" data-requires-permission-action="generate_reports">Download Report</button>
        </div>
      </div>
    </section> -->
  </main>  
  <!-- Common admin authentication check script -->
  <script src="../../js/admin/adminauth-check-new.js" type="module"></script>
  <!-- Admin Other page JavaScript -->
  <script src="../../js/admin/adminOther.js" type="module"></script>
</body>
</html>
